{"version":3,"sources":["script.js"],"names":["app","validation","elem","length","displayElem","names_array","$","each","index","li","lis","indexOf","this","find","text","toLowerCase","hide","show","identifyKey","e","which","searchName","array","string_to_search","searchString","string","temp_string","slice","filter","showForm","slideUp","slideDown","hideForm","getContactData","$li","currentTarget","closest","nameData","emailData","addressData","addClass","val","attr","editContact","id","preventDefault","$form","deleteContact","remove","clearForm","target","not","removeClass","newContact","contactTemplate","html","contact","serializeArray","templateFunction","Handlebars","compile","html_code","append","incrementId","Number","init","self","on","prop","submit","form_id","li_id","hasClass","selectedNames","names","map","push"],"mappings":"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","file":"scripts.min.js","sourcesContent":["// todo\r\n// localStorage\r\nvar app = {\r\n  // basic validation for no input\r\n  validation: function(elem) {\r\n    return !!elem.length;\r\n  },\r\n\r\n  displayElem: function(names_array) {\r\n    $('li').each(function(index, li, lis) {\r\n      if (names_array.indexOf($(this).find('.name').text().toLowerCase()) === -1) {\r\n        $(this).hide();\r\n      } else {\r\n        $(this).show();\r\n      }\r\n    });\r\n  },\r\n\r\n  identifyKey: function(e) {\r\n    return (e.which >= 97 && e.which <= 122);\r\n  },\r\n\r\n  searchName: function (array, string_to_search) {\r\n    var searchString = function(string) {\r\n      var temp_string = string.slice(0, string_to_search.length);\r\n      return temp_string === string_to_search;\r\n    }; \r\n    return array.filter(searchString);\r\n  },\r\n\r\n  showForm: function() {\r\n    $('main').slideUp(300);\r\n    $('.add-contact-form').slideDown(400);\r\n  },\r\n\r\n  hideForm: function() {\r\n    $('main').slideDown(400);\r\n    $('.add-contact-form').slideUp(300);\r\n  },\r\n\r\n  getContactData: function(e) {\r\n    // implement edit - get data from li, recall form, prepopulate form with data\r\n    var $li = $(e.currentTarget).closest('li');\r\n    var nameData = $li.find('.name').text();\r\n    var emailData = $li.find('.email').text();\r\n    var addressData = $li.find('.address').text();\r\n    $('.add-contact-form form').addClass(\"editing\");\r\n    $('#name').val(nameData);\r\n    $('#email').val(emailData);\r\n    $('#address').val(addressData);\r\n    $('#current_id').attr('data-id', $li.attr(\"data-id\"));\r\n    this.showForm();\r\n  },\r\n\r\n  editContact: function(e, id) {\r\n    e.preventDefault();\r\n    var $li = $('li').filter(function() {\r\n    return ($(this).attr('data-id') == id);\r\n    });\r\n    var $form = $('.add-contact-form form');\r\n    var nameData = $form.find('#name').val();\r\n    var emailData = $form.find('#email').val();\r\n    var addressData = $form.find('#address').val();\r\n\r\n    $li.find('.name').text(nameData); \r\n    $li.find('.email').text(emailData); \r\n    $li.find('.address').text(addressData); \r\n  },\r\n\r\n  deleteContact: function(e, id) {\r\n    var $li = $('li').filter(function() {\r\n      return ($(this).attr('data-id') == id);\r\n    });\r\n    $li.remove();\r\n  },\r\n\r\n  clearForm: function(e) {\r\n    $(e.target).find('input').not(':hidden').val('');\r\n    $(e.target).removeClass(\"editing\");\r\n  },\r\n\r\n  newContact: function() {\r\n    var contactTemplate = $('#contact').html();\r\n    var contact = $('.add-contact-form form').serializeArray();\r\n    var templateFunction = Handlebars.compile(contactTemplate);\r\n    var html_code = templateFunction({contact: contact}); \r\n    $('#contacts').append(html_code);\r\n  },\r\n\r\n  incrementId: function(id) {\r\n    return Number(++id);\r\n  },\r\n\r\n  init: function() {\r\n    var self = this;\r\n    var $form =  $('.add-contact-form form');\r\n\r\n    $('#add_contact_btn').on('click', this.showForm);\r\n    $('button[type=\"reset\"]').on('click', this.hideForm);\r\n\r\n    // basic validation\r\n    $form.find('input').on('blur', function() {\r\n      if (!self.validation($(this).val())) { \r\n        $('[type=\"submit\"]').prop(\"disabled\", true);\r\n      } else {\r\n        $('[type=\"submit\"]').prop(\"disabled\", false);\r\n      }\r\n    });\r\n\r\n    $form.submit(function(e) {\r\n      e.preventDefault();\r\n      var form_id = $('input[type=\"hidden\"]').val();\r\n      var li_id = $form.find('#current_id').attr('data-id');\r\n\r\n      if ( $form.hasClass(\"editing\")) {\r\n        self.editContact(e, li_id);\r\n      } else {\r\n        $('input[type=\"hidden\"]').val(self.incrementId(form_id));\r\n        self.newContact(e);\r\n      } \r\n      self.hideForm();\r\n      self.clearForm(e);\r\n    });\r\n\r\n    $('#contacts').on('click', '.edit', function(e) {\r\n      self.getContactData(e);\r\n    });\r\n\r\n    $('#contacts').on('click', '.delete', function(e) {\r\n      var id = $(e.currentTarget).closest('li').attr('data-id');\r\n      self.deleteContact(e, id);\r\n    });\r\n\r\n    $('input[type=\"search\"]').on('keyup', function(e) {\r\n      var selectedNames;\r\n      if (self.identifyKey) {\r\n        var names = [];\r\n        $('li').map(function() {\r\n          names.push($(this).find('.name').text().toLowerCase());\r\n        });\r\n\r\n        selectedNames = self.searchName(names, $(this).val().toLowerCase());\r\n      } else {\r\n        return false;\r\n      }\r\n      \r\n      self.displayElem(selectedNames);\r\n    });\r\n  }\r\n};\r\n\r\n$(function() { app.init(); });\r\n"]}